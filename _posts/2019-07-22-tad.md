---
layout: single
title:  "Test Aware Development"
---

You'd be hard pressed to find someone that doesn't think that automated testing is important in software development. Sometimes, I skip over doing tests in the beginning of a project to crank something out or do a proof of concept. I try to be aware and make conscious decisions of the code I'm writing so it can be easily tested later.

Especially in a fast paced environment, you might have a business justification to ignore some automated tests (hopefully not all). There are some downsides to Test Driven Development, as the specific unit test focuses on implementation. You'll definitely have to revise your tests as you go along when you're building up your project and build out your capabilities -- unless you have a clear design from the beginning. You might philosophically agree with TDD (or maybe your management does) but I want to introduce a topic I call Test Aware Development.

# Write it like you can't refactor it
If you really can't write automated tests in your code from the beginning, at least write your code so you don't need to refactor all of it in order to test it later. There will probably be a need at some point to build out your automated testing suite and your project matures. You **do not** want to have to refactor everything you just wrote because you found out that it's hard to work with dependencies (like a database or external API).

## Example
Let's say that you're working on a web application that reads from a database, manipulates data and then returns the result. Excuse the bad query to help demonstrate a point.

### Option A
```python

@app.route('/movies')
def index():
    query = "select * from movies"

    cursor.execute(query)
    movie_records = cursor.fetchall()

    filtered_list = [] 
    for row in movie_records:
        if row[2] == 'Tom Hanks':
            filtered_list.push(row)
    
    return filtered_list
```

### Option B
```python

@app.route('/movies')
def index():
    query = "select * from movies"

    cursor.execute(query)
    movie_records = cursor.fetchall()

    return filter_movies(movie_records)


def filter_movies(movie_records):
    for row in movie_records:
        if row[2] == 'Tom Hanks':
            filtered_list.push(row)
    
    return filtered_list
```

Which one do you think is easier to test one month from now, without refactoring your code? Option B enables you to remove the dependency of the database. You can add a test on the actual code doing the manipulation later by mocking the data being passed in.

# Conclusion
Test Driven Development is the gold standard that most teams (or organizations) probably strive for, but I personally haven't met any that actually follow it. It's a difficult thing to do, especially when you're prototyping something out and then it turns into a full on project. If you don't start doing TDD from the beginning of a project, it takes a lot of work to catch up.

Test Aware Development can be implemented from the beginning without any additional effort, with the payoff being in the future when you decide to switch to TDD or want to add more tests to your project. It removes the outside dependencies and puts the actual code in functions to allow tests to easily be added.
